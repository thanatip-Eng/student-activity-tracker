<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Import Sample Data to Firebase</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 { color: #1a1a2e; margin-bottom: 10px; }
        h2 { color: #667eea; margin-bottom: 15px; font-size: 1.3em; }
        p { color: #666; margin-bottom: 15px; line-height: 1.6; }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .warning strong { color: #856404; }
        .btn {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }
        .status.success { background: #d4edda; color: #155724; display: block; }
        .status.error { background: #f8d7da; color: #721c24; display: block; }
        .status.info { background: #cce5ff; color: #004085; display: block; }
        .log {
            background: #1a1a2e;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 13px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
        }
        .log-entry { margin-bottom: 5px; }
        .log-success { color: #00ff00; }
        .log-error { color: #ff4444; }
        .log-info { color: #00bfff; }
        pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>üîß Import Sample Data to Firebase</h1>
            <p>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Firestore Database</p>
            
            <div class="warning">
                <strong>‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</strong> ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Firebase Config ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå <code>js/firebase-config.js</code> ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ
            </div>
        </div>

        <div class="card">
            <h2>üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤</h2>
            <p><strong>‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤:</strong> 3 ‡∏Ñ‡∏ô</p>
            <p><strong>‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°:</strong> 5 ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</p>
            <p><strong>‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°:</strong> 8 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
            
            <button class="btn btn-primary" onclick="importAllData()">
                üöÄ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            </button>
            
            <button class="btn btn-danger" onclick="clearAllData()">
                üóëÔ∏è ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            </button>
            
            <div id="status" class="status"></div>
            <div id="log" class="log" style="display: none;"></div>
        </div>

        <div class="card">
            <h2>üìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</h2>
            
            <h3 style="margin-top: 20px; color: #333;">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (Students)</h3>
            <pre id="students-preview"></pre>
            
            <h3 style="margin-top: 20px; color: #333;">‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Activities)</h3>
            <pre id="activities-preview"></pre>
            
            <h3 style="margin-top: 20px; color: #333;">‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° (Participation)</h3>
            <pre id="participation-preview"></pre>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    
    <script>
        // ============================================
        // SAMPLE DATA
        // ============================================
        const SAMPLE_STUDENTS = [
            {
                name: "‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ",
                email: "somchai@cmu.ac.th",
                studentId: "640610001",
                department: "Computer Engineering"
            },
            {
                name: "‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
                email: "somying@cmu.ac.th",
                studentId: "640610002",
                department: "Electrical Engineering"
            },
            {
                name: "‡∏ô‡∏≤‡∏¢‡∏ó‡∏î‡∏™‡∏≠‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö",
                email: "test@cmu.ac.th",
                studentId: "640610003",
                department: "Mechanical Engineering"
            }
        ];

        const SAMPLE_ACTIVITIES = [
            {
                name: "Workshop AI for Beginners",
                description: "‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Ñ‡∏ä‡∏≠‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô Artificial Intelligence",
                level: 2,
                "1.1": 2, "1.2": 1,
                "4.1": 2, "4.2": 2
            },
            {
                name: "English Communication Camp",
                description: "‡∏Ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£",
                level: 2,
                "2.1": 2, "2.2": 2, "2.3": 3
            },
            {
                name: "Leadership Development Program",
                description: "‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏†‡∏≤‡∏ß‡∏∞‡∏ú‡∏π‡πâ‡∏ô‡∏≥",
                level: 3,
                "3.1": 3, "3.2": 2, "3.3": 3,
                "6.1": 2, "6.2": 2
            },
            {
                name: "Hackathon 2024",
                description: "‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå 48 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á",
                level: 4,
                "1.1": 3, "1.2": 4,
                "3.2": 3, "3.3": 4,
                "4.1": 3, "4.3": 4,
                "5.2": 3
            },
            {
                name: "Design Thinking Workshop",
                description: "‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Ñ‡∏ä‡∏≠‡∏õ Design Thinking ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô",
                level: 2,
                "1.3": 2,
                "5.1": 3, "5.3": 1,
                "6.3": 2
            }
        ];

        const SAMPLE_PARTICIPATION = [
            { studentId: "640610001", activityName: "Workshop AI for Beginners", status: "Approved", date: "2024-01-15" },
            { studentId: "640610001", activityName: "English Communication Camp", status: "Approved", date: "2024-02-20" },
            { studentId: "640610001", activityName: "Hackathon 2024", status: "Approved", date: "2024-03-10" },
            { studentId: "640610002", activityName: "Leadership Development Program", status: "Approved", date: "2024-01-25" },
            { studentId: "640610002", activityName: "Design Thinking Workshop", status: "Approved", date: "2024-02-15" },
            { studentId: "640610002", activityName: "Workshop AI for Beginners", status: "Pending", date: "2024-03-20" },
            { studentId: "640610003", activityName: "English Communication Camp", status: "Approved", date: "2024-02-20" },
            { studentId: "640610003", activityName: "Hackathon 2024", status: "Pending", date: "2024-03-10" }
        ];

        // Show preview
        document.getElementById('students-preview').textContent = JSON.stringify(SAMPLE_STUDENTS, null, 2);
        document.getElementById('activities-preview').textContent = JSON.stringify(SAMPLE_ACTIVITIES, null, 2);
        document.getElementById('participation-preview').textContent = JSON.stringify(SAMPLE_PARTICIPATION, null, 2);

        // ============================================
        // IMPORT FUNCTIONS
        // ============================================
        const logEl = document.getElementById('log');
        const statusEl = document.getElementById('status');

        function log(message, type = 'info') {
            logEl.style.display = 'block';
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logEl.appendChild(entry);
            logEl.scrollTop = logEl.scrollHeight;
        }

        function showStatus(message, type) {
            statusEl.className = `status ${type}`;
            statusEl.textContent = message;
        }

        async function importAllData() {
            logEl.innerHTML = '';
            log('üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...', 'info');
            
            try {
                // Import students
                log('üìö ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤...', 'info');
                for (const student of SAMPLE_STUDENTS) {
                    await db.collection('students').add(student);
                    log(`  ‚úÖ ${student.name} (${student.email})`, 'success');
                }

                // Import activities
                log('üìã ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°...', 'info');
                for (const activity of SAMPLE_ACTIVITIES) {
                    await db.collection('activities').add(activity);
                    log(`  ‚úÖ ${activity.name}`, 'success');
                }

                // Import participation
                log('üë• ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°...', 'info');
                for (const p of SAMPLE_PARTICIPATION) {
                    await db.collection('participation').add(p);
                    log(`  ‚úÖ ${p.studentId} - ${p.activityName}`, 'success');
                }

                log('üéâ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î!', 'success');
                showStatus('‚úÖ ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏•‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å', 'success');

            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
                showStatus(`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`, 'error');
            }
        }

        async function clearAllData() {
            if (!confirm('‚ö†Ô∏è ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;
            
            logEl.innerHTML = '';
            log('üóëÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...', 'info');

            try {
                const collections = ['students', 'activities', 'participation', 'submissions'];
                
                for (const collName of collections) {
                    log(`üìÅ ‡∏•‡∏ö ${collName}...`, 'info');
                    const snapshot = await db.collection(collName).get();
                    const batch = db.batch();
                    snapshot.docs.forEach(doc => batch.delete(doc.ref));
                    await batch.commit();
                    log(`  ‚úÖ ‡∏•‡∏ö ${snapshot.size} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'success');
                }

                log('üéâ ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
                showStatus('‚úÖ ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');

            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
                showStatus(`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html>
